"""
标题生成系统 - 配置文件
版本：v6.0 - 方案C混合模式
"""

import re
from typing import Dict, List

# ============================================================================
# 一、品牌配置
# ============================================================================

BRAND_KEYWORDS = {
    'callawaygolf': ['callaway', 'callaway golf', '卡拉威', '卡拉威高尔夫'],
    'titleist': ['titleist', '泰特利斯', 'titleist golf'],
    'puma': ['puma', 'puma golf', '彪马'],
    'adidas': ['adidas', 'adidas golf', '阿迪达斯'],
    'nike': ['nike', 'nike golf', '耐克'],
    'lecoqgolf': ['ルコック', 'le coq', 'lecoq', 'le coq sportif', 'sportif golf', '乐卡克', 'le coq sportif golf'],
    'underarmour': ['under armour', 'ua', '安德玛'],
    'footjoy': ['footjoy', 'fj', 'joy'],
    'cleveland': ['cleveland', 'cleveland golf'],
    'mizuno': ['mizuno', '美津濃', '美津浓'],
    'ping': ['ping', 'ping golf'],
    'taylormade': ['taylor made', 'taylormade', 'tm', '泰勒梅'],
    'pearlygates': ['pearly gates', 'パーリーゲイツ', 'pg is pg', 'pearlygates', 'mix.tokyo'],
    'munsingwear': ['munsingwear', 'マンシングウェア', 'penguin', '万星威']
}

# 品牌中文名映射
BRAND_MAP = {
    'callawaygolf': '卡拉威Callaway',
    'titleist': '泰特利斯Titleist',
    'puma': '彪马Puma',
    'adidas': '阿迪达斯Adidas',
    'nike': '耐克Nike',
    'lecoqgolf': 'Le Coq Sportif Golf',
    'underarmour': '安德玛UA',
    'footjoy': 'FootJoy',
    'cleveland': 'Cleveland',
    'mizuno': '美津浓Mizuno',
    'ping': 'Ping',
    'taylormade': '泰勒梅TaylorMade',
    'pearlygates': 'PEARLY GATES',
    'munsingwear': '万星威Munsingwear'
}

# 品牌简称
BRAND_SHORT_NAME = {
    'callawaygolf': '卡拉威',
    'titleist': '泰特利斯',
    'puma': '彪马',
    'adidas': '阿迪达斯',
    'nike': '耐克',
    'lecoqgolf': '乐卡克',
    'underarmour': '安德玛',
    'footjoy': 'FootJoy',
    'cleveland': 'Cleveland',
    'mizuno': '美津浓',
    'ping': 'Ping',
    'taylormade': '泰勒梅',
    'pearlygates': 'PEARLY GATES',
    'munsingwear': '万星威'
}

# ============================================================================
# 二、大分类（简化版）
# ============================================================================

# 大分类枚举
CATEGORY_OUTERWEAR = '外套'
CATEGORY_TOP = '上衣'
CATEGORY_BOTTOM = '下装'
CATEGORY_SHOES = '鞋类'
CATEGORY_ACCESSORY = '配件'
CATEGORY_RAINWEAR = '雨具'

# 小配件类型（需要特殊处理）
SMALL_ACCESSORIES = {
    '袜子', '帽子', '鸭舌帽', '遮阳帽', '球帽',
    '腰带', '皮带', '手套', '护腕', '腕带',
    '头带', '发带', '围脖', '脖套'
}

# ============================================================================
# 三、允许的结尾词（完整列表）
# ============================================================================

ALLOWED_ENDINGS_APPAREL = [
    # 外套类
    '外套', '夹克', '马甲', '背心',
    # 上衣类
    'POLO衫', '针织衫', '卫衣', '上衣', '半袖', 'T恤',
    # 下装类
    '长裤', '短裤', '裙子',
    # 鞋类
    '球鞋', '运动鞋',
    # 配件
    '球帽', '手套',
    # 雨具
    '雨衣', '雨裤'
]

ALLOWED_ENDINGS_ACCESSORIES = [
    # 袜子类
    '袜子', '中筒袜', '短袜', '长筒袜', '运动袜', '高筒袜',
    # 帽子类
    '帽子', '鸭舌帽', '遮阳帽', '球帽', '毛线帽', '针织帽',
    # 腰带
    '腰带', '皮带',
    # 手套
    '手套', '半指手套', '全指手套',
    # 护具
    '护腕', '腕带', '头带', '发带',
    # 围脖
    '围脖', '脖套',
    # 球具
    '球杆头套', '标记夹', '球包', '毛巾', '雨伞', '防晒用品', '清洁用品'
]

# ============================================================================
# 四、禁止词（完整列表）
# ============================================================================

FORBIDDEN_WORDS = [
    '服饰', '精品', '再入荷', '限定', '定番',
    '配色切替', '裏地付', '踵', '調',
    '球场', '训练', '球局', '练习',
    '在线', 'オンライン', 'online'
]

# ============================================================================
# 五、文本清理规则
# ============================================================================

# 日文字符正则
JAPANESE_CHAR_PATTERN = re.compile(r'[\u3040-\u30ff\u31f0-\u31ff\uff65-\uff9f]')

# 全角数字转半角
FULLWIDTH_TO_HALFWIDTH = str.maketrans("０１２３４５６７８９", "0123456789")

# 繁体转简体映射
TRADITIONAL_TO_SIMPLIFIED = str.maketrans({
    '調': '调', '鏈': '链', '險': '险', '頭': '头', '髮': '发', '線': '线',
    '國': '国', '選': '选', '組': '组', '備': '备', '標': '标', '環': '环',
    '質': '质', '際': '际', '護': '护', '專': '专', '導': '导', '網': '网',
    '製': '制', '復': '复', '變': '变', '爲': '为', '産': '产', '學': '学',
    '經': '经', '過': '过', '運': '运', '動': '动', '體': '体', '機': '机',
    '會': '会', '員': '员', '關': '关', '開': '开', '發': '发', '業': '业'
})

# 重复模式检测（连续重复2字以上片段）
REPEAT_PATTERN = re.compile(r'(.{2,})\1+')

# 截断字符
TRUNCATION_CHARS = {'防', '保', '暖', '舒', '适', '透', '气', '轻', '量', '弹', '力', '速', '干', '防', '晒'}

# ============================================================================
# 六、长度限制
# ============================================================================

# 标准服装
APPAREL_MIN_LEN = 26
APPAREL_MAX_LEN = 30

# 小配件
ACCESSORY_MIN_LEN = 25
ACCESSORY_MAX_LEN = 30

# ============================================================================
# 七、GLM配置
# ============================================================================

TITLE_MODEL = 'glm-4.5-air'
GLM_MIN_INTERVAL = 0.4

# ============================================================================
# 八、错误标题特征（用于检测）
# ============================================================================

# 错误标题的特征词（如果包含这些，说明GLM没有直接输出标题）
ERROR_INDICATORS = [
    '要求', '必须', '格式', '应该', '建议'  # 只保留这5个
]